---
layout: page
title: VMware 桥接网络无法访问宿主机和局域网问题排查与解决
category: 技术
tags: VM
---
在日常使用 VMware 虚拟机时，我们经常选择 **桥接模式** 让虚拟机直接接入物理局域网。但有时会遇到这样的问题：虚拟机之间可以互相通信，但无法访问宿主机、网关或局域网内其他设备。本文结合实际案例，总结排查思路和解决办法。

---

### 一、问题现象

1. 多台虚拟机之间可以互相 ping 通 ✅
2. 无法 ping 宿主机 ❌
3. 无法 ping 局域网网关或其他设备 ❌

这种情况说明虚拟机网络内部连通，但无法与宿主机及局域网建立正常通信。

---

### 二、排查思路

在桥接模式下出现这种问题，可以按以下顺序进行排查：

#### 1. 检查桥接网卡绑定

* VMware 桥接模式需要将虚拟网卡绑定到宿主机的物理网卡（有线网卡或无线网卡）。
* 如果宿主机有多个网络接口，虚拟机可能默认桥接到了**不可用或未连接的网络**，导致虚拟机无法访问局域网。

#### 2. 检查虚拟机和宿主机 IP

* 确认虚拟机 IP 和宿主机在同一网段，如：

  ```
  宿主机：192.168.1.100/24
  虚拟机：192.168.1.101/24
  ```
* IP 或子网掩码不一致会导致无法访问网关或宿主机。

#### 3. 检查防火墙

* Windows 防火墙可能阻止 ICMP（ping）请求。
* 可临时关闭防火墙验证：

  ```
  控制面板 → 系统和安全 → Windows 防火墙 → 高级设置 → 入站规则 → 文件和打印机共享 (回显请求 ICMPv4) 启用
  ```

#### 4. 检查网络设备和物理网卡

* Wi-Fi 网卡可能不支持桥接访问局域网，尤其在笔记本上。
* 如果是无线网卡桥接失败，可尝试切换为有线网卡或使用 NAT 模式。

---

### 三、实际问题定位

在本案例中，排查发现：

* 虚拟机桥接模式自动选择了宿主机的一块**不可用网卡**（未连接或断开）。
* 虚拟机内部虽然能互通，但无法访问宿主机和局域网。
* 问题在宿主机重启后出现，说明 VMware 桥接设置可能会默认记忆网卡状态。

---

### 四、解决办法

1. 打开 **VMware 虚拟机设置 → 网络适配器 → 桥接模式**
2. 点击 **编辑 → 虚拟网络编辑器 → 更改桥接网卡**
3. 明确指定宿主机当前可用的物理网卡（如有线网卡）
4. 保存设置并重启虚拟机
5. 验证虚拟机是否能访问宿主机和局域网

> ✅ 经过上述操作，虚拟机即可正常通过桥接模式访问宿主机和局域网，问题彻底解决。

---

### 五、总结

* 桥接模式虚拟机无法访问宿主机或网关，多半与 **桥接网卡选择错误或不可用** 有关。
* 排查重点：

  1. 虚拟机桥接绑定的物理网卡是否可用
  2. IP 和子网是否在同一网段
  3. 防火墙是否阻止 ICMP
* 核心解决思路：**编辑虚拟网络编辑器，手动指定可用物理网卡**。
* 对于笔记本用户，Wi-Fi 网卡可能存在桥接限制，可考虑使用有线网卡或 NAT 模式。
